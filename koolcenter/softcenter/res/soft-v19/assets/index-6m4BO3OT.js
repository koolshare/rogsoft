import{_ as b,c as v,b as t,j as m,w as S,f as p,e as T,g as h,t as w,F as y,h as _,u as B,r as V,q as C,a as d,l as D,s as N,o as x}from"./index-BgPNegIV.js";const R={setup(k,e){const a=B(),o=_(()=>a.getters["model/LocalVersion"]),g=_(()=>a.getters["model/RemotelyVersion"]),s=V(""),n=V(null),u=_(()=>a.state.model.localSoftcenter),l=_(()=>a.state.model.remotelySoftcenter),i=()=>{N(()=>{n.value&&(n.value.scrollTop=n.value.scrollHeight)})};C(s,()=>{i()});const L=()=>{d.UpdateSoftcenter({softcenter_home_url:u.value.softcenter_home_url,softcenter_installing_tar_url:l.value.tar_url,softcenter_installing_md5:l.value.md5,softcenter_installing_version:l.value.version}).then(c=>{D.start(()=>{location.reload()})}).catch(c=>{})},f=()=>{d.getBackupLog().then(c=>{let r=c;r.indexOf("XU6J03M6")!=-1?(r=r.replace(/XU6J03M6/g,""),s.value=r,i()):(s.value=r,i(),setTimeout(f,300))})};return f(),{currentVersion:o,lastVersion:g,logValue:s,logTextDom:n,updateSoftware:L,DownloadLog:()=>{d.downloadBackupLog()},RemoveLog:()=>{d.removeLog().then(c=>{s.value="日志已清除",i()})}}}},U={class:"software-setting_header"},q={class:"software-setting_version theme_box"},F={class:"software-setting_version__content"},J={class:"software-setting_version__content"},M={key:0,class:"software-setting_version__btn"},X={class:"software-setting_log theme_box"},j={class:"software-setting_log__content"},z=["value"],E={class:"software-setting_log__pannel-btn"};function H(k,e,a,o,g,s){const n=p("svg-arrow-left"),u=p("router-link");return x(),v(y,null,[t("div",U,[m(u,{to:"/",class:"software-setting__navigation_back"},{default:S(()=>[m(n),e[3]||(e[3]=t("span",null,"软件中心",-1))]),_:1})]),t("div",q,[t("div",F,[e[4]||(e[4]=t("span",null,"当前版本: ",-1)),e[5]||(e[5]=h()),t("span",null,[t("em",null,w(o.currentVersion),1)])]),t("div",J,[e[6]||(e[6]=t("span",null,"在线版本: ",-1)),t("span",null,[t("em",null,w(o.lastVersion),1)])]),o.currentVersion!=o.lastVersion&&o.currentVersion&&o.lastVersion?(x(),v("div",M,[t("button",{class:"update",onClick:e[0]||(e[0]=l=>o.updateSoftware())},"更新")])):T("",!0)]),t("div",X,[e[7]||(e[7]=t("div",{class:"software-setting_log__title"},[t("span",null,"软件中心，日志记录")],-1)),e[8]||(e[8]=t("div",{class:"software-setting_log__desc"},[t("span",null,"软件中心插件安装/卸载日志记录")],-1)),t("div",j,[t("textarea",{ref:"logTextDom",cols:"63",rows:"32",wrap:"on",readonly:"readonly",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",value:o.logValue},null,8,z)]),t("div",E,[t("button",{class:"remove",onClick:e[1]||(e[1]=l=>o.DownloadLog())}," 下载日志 "),t("button",{class:"remove",onClick:e[2]||(e[2]=l=>o.RemoveLog())}," 清空日志 ")])])],64)}const G=b(R,[["render",H],["__scopeId","data-v-5da65882"]]);export{G as default};
