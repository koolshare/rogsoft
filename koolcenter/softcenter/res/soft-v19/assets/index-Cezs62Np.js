import{A as V,_ as w,B as j,r as D,i as U,h as x,u as G,C as q,E as H,c as p,b as s,d as K,e as c,j as u,f as r,t as _,g as y,F as I,m as P,a as k,l as L,o as a}from"./index-BgPNegIV.js";const R={start(m){V.commit("loading/start",m)},stop(){V.commit("loading/stop")}},W={props:{app:Object},components:{FirstOpenComponent:j},setup(m){const t=G(),o=D(m.app),n=U.numberToSum;x(()=>t.getters["model/LocalAppCount"]);const F=x(()=>{var i,d;const e=((d=(i=t==null?void 0:t.state)==null?void 0:i.model)==null?void 0:d.localSoftcenter)||{};return(e==null?void 0:e[q])===H}),v=D(!1),A=()=>{v.value=!1},b=()=>{o.value.isInstall&&U.OpenAppWeb(o.value.name,o.value.target)},S=()=>{confirm(`确定要卸载 ${o.value.title} 吗?`)&&k.RemoveApp(o.value).then(e=>{L.start(()=>{location.reload()})})},C=()=>{if(!F.value)return v.value=!0;k.InsertApp(o.value).then(e=>{L.start(()=>{location.reload()})})},O=()=>{k.UpdateApp(o.value.update).then(e=>{L.start(()=>{location.reload()})})},h=()=>{R.start("进行中...");const e=o.value.name;k.postStarApp(e).then(i=>{t.dispatch("model/starApp",e)}).catch(()=>{}).then(()=>{R.stop()})},g=e=>{e&&window.open(e,"_blank")},f=x(()=>{var e;return(e=o==null?void 0:o.value)!=null&&e.isInstall?`/res/icon-${o.value.name}.png`:`${U.HomeUrl()}/softcenter/softcenter/res/icon-${o.value.name}.png`});return{app:o,open,numberToSum:n,OpenApp:b,InstallApp:C,DeleteApp:S,UpdateApp:O,StarApp:h,OpenLink:g,thumbnailURL:f,closeFirstOpen:A,firstOpen:v}}},Y={class:"plugin-app theme_apps"},z={class:"plugin-app_f"},J=["title"],M=["src"],Q={class:"plugin-app_hooks"},X={class:"plugin-app_hooks__item"},Z=["href"],$=["title"],tt={class:"plugin-app_info"},nt=["title"],st={class:"plugin-app_info__title___text"},et={class:"plugin-app_info__title___version"},ot={class:"plugin-app_info__date"},at={class:"plugin-app_info__as"},pt=["title"],lt={class:"plugin-app_info__btn"},it={class:"plugin-app_info__tags"},rt={class:"tag"},_t={class:"btn_box"},dt={key:0,class:"delete",title:"卸载"};function ct(m,t,o,n,F,v){var g,f,e,i,d,B,E,N,T;const A=r("svg-home"),b=r("svg-info"),S=r("svg-nostar"),C=r("svg-star"),O=r("svg-delete"),h=r("FirstOpenComponent");return a(),p("li",Y,[s("div",z,[s("div",{class:"plugin-app_thumbnail",title:n.app.title,onClick:t[0]||(t[0]=l=>n.OpenApp())},[s("img",{src:n.thumbnailURL,alt:"图标出走了"},null,8,M)],8,J),s("div",Q,[s("div",X,[n.app.link?(a(),p("a",{key:0,href:n.app.link,class:"home",target:"_blank",rel:"noopener noreferrer",title:"官网"},[u(A)],8,Z)):c("",!0),s("a",{rel:"noopener noreferrer",title:n.app.description},[u(b)],8,$)])])]),s("div",tt,[s("div",{class:"plugin-app_info__title",title:n.app.title},[s("span",st,_(n.app.title),1),s("span",et," v"+_(n.app.version),1)],8,nt),s("div",ot,[s("span",null,_(n.app.author),1)]),s("div",at,[s("span",null,_(n.numberToSum((f=(g=n.app)==null?void 0:g.expand)==null?void 0:f.downloadCount))+" 次下载",1),t[6]||(t[6]=y("   ",-1)),t[7]||(t[7]=s("span",null,"｜",-1)),t[8]||(t[8]=y("    ",-1)),s("span",null,[y(_(n.numberToSum((i=(e=n.app)==null?void 0:e.expand)==null?void 0:i.starCount))+" 次点赞 ",1),((d=n.app)==null?void 0:d.expand)!=null?(a(),p(I,{key:0},[(E=(B=n.app)==null?void 0:B.expand)!=null&&E.isStar?(a(),p("button",{key:0,class:"star",title:(T=(N=n.app)==null?void 0:N.expand)==null?void 0:T.isStar},[u(S)],8,pt)):(a(),p("button",{key:1,class:"star",onClick:t[1]||(t[1]=l=>n.StarApp())},[u(C)]))],64)):c("",!0)])]),s("div",lt,[s("div",it,[(a(!0),p(I,null,P(n.app.tagsList,l=>(a(),p(I,{key:l},[s("div",rt,[s("span",null,_(l),1)]),t[9]||(t[9]=s("span",{class:"block"},"｜",-1))],64))),128))]),s("div",_t,[n.app.isInstall?(a(),p("div",dt,[s("a",{onClick:t[2]||(t[2]=l=>n.DeleteApp()),title:"卸载"},[u(O)])])):c("",!0),n.app.isUpdate&&n.app.update?(a(),p("button",{key:1,class:"update",title:"升级",onClick:t[3]||(t[3]=l=>n.UpdateApp())},[...t[10]||(t[10]=[s("span",null,"更新",-1)])])):c("",!0),n.app.isInstall?(a(),p("button",{key:2,class:"open",onClick:t[4]||(t[4]=l=>n.OpenApp())},[...t[11]||(t[11]=[s("span",null,"打开",-1)])])):(a(),p("button",{key:3,class:"install",onClick:t[5]||(t[5]=l=>n.InstallApp())},[...t[12]||(t[12]=[s("span",null,"安装",-1)])]))])])]),n.firstOpen?(a(),K(h,{key:0,close:n.closeFirstOpen},null,8,["close"])):c("",!0)])}const mt=w(W,[["render",ct],["__scopeId","data-v-ce58de4f"]]);export{mt as A,R as l};
