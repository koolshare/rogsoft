import{A as T,_ as D,B as w,C as G,i as I,h as b,u as j,E as q,G as H,r as K,c as l,b as e,d as P,e as d,j as u,f as r,t as _,g as L,F,m as W,a as S,l as B,o as a}from"./index-C4NngMkr.js";const V={start(v){T.commit("loading/start",v)},stop(){T.commit("loading/stop")}},Y={props:{app:Object},components:{FirstOpenComponent:w},setup(v){const t=j(),o=G(v,"app"),n=I.numberToSum,m=b(()=>{var s,p;return((p=(s=t==null?void 0:t.state)==null?void 0:s.model)==null?void 0:p.localSoftcenter)||{}}),h=b(()=>{var s,p;return!!((s=m.value)!=null&&s.softcenter_home_url||(p=m.value)!=null&&p.softcenter_version)}),O=b(()=>{var s;return h.value?((s=m.value)==null?void 0:s[q])===H:!1}),c=K(!1),C=()=>{c.value=!1},U=()=>{o.value.isInstall&&I.OpenAppWeb(o.value.name,o.value.target)},x=()=>{confirm(`确定要卸载 ${o.value.title} 吗?`)&&S.RemoveApp(o.value).then(s=>{B.start(()=>{location.reload()})})},y=()=>{if(!h.value){alert("软件中心数据加载中，请稍候重试！");return}if(!O.value)return c.value=!0;S.InsertApp(o.value).then(s=>{B.start(()=>{location.reload()})})},f=()=>{S.UpdateApp(o.value.update).then(s=>{B.start(()=>{location.reload()})})},g=()=>{V.start("进行中...");const s=o.value.name;S.postStarApp(s).then(p=>{t.dispatch("model/starApp",s)}).catch(()=>{}).then(()=>{V.stop()})},k=s=>{s&&window.open(s,"_blank")},A=b(()=>{var s;return(s=o==null?void 0:o.value)!=null&&s.isInstall?`/res/icon-${o.value.name}.png`:`${I.HomeUrl()}/softcenter/softcenter/res/icon-${o.value.name}.png`});return{app:o,open,numberToSum:n,OpenApp:U,InstallApp:y,DeleteApp:x,UpdateApp:f,StarApp:g,OpenLink:k,thumbnailURL:A,closeFirstOpen:C,firstOpen:c}}},z={class:"plugin-app theme_apps"},J={class:"plugin-app_f"},M=["title"],Q=["src"],X={class:"plugin-app_hooks"},Z={class:"plugin-app_hooks__item"},$=["href"],tt=["title"],nt={class:"plugin-app_info"},et=["title"],st={class:"plugin-app_info__title___text"},ot={class:"plugin-app_info__title___version"},at={class:"plugin-app_info__date"},lt={class:"plugin-app_info__as"},pt=["title"],it={class:"plugin-app_info__btn"},rt={class:"plugin-app_info__tags"},_t={class:"tag"},ct={class:"btn_box"},dt={key:0,class:"delete",title:"卸载"};function ut(v,t,o,n,m,h){var f,g,k,A,s,p,E,N,R;const O=r("svg-home"),c=r("svg-info"),C=r("svg-nostar"),U=r("svg-star"),x=r("svg-delete"),y=r("FirstOpenComponent");return a(),l("li",z,[e("div",J,[e("div",{class:"plugin-app_thumbnail",title:n.app.title,onClick:t[0]||(t[0]=i=>n.OpenApp())},[e("img",{src:n.thumbnailURL,alt:"图标出走了"},null,8,Q)],8,M),e("div",X,[e("div",Z,[n.app.link?(a(),l("a",{key:0,href:n.app.link,class:"home",target:"_blank",rel:"noopener noreferrer",title:"官网"},[u(O)],8,$)):d("",!0),e("a",{rel:"noopener noreferrer",title:n.app.description},[u(c)],8,tt)])])]),e("div",nt,[e("div",{class:"plugin-app_info__title",title:n.app.title},[e("span",st,_(n.app.title),1),e("span",ot," v"+_(n.app.version),1)],8,et),e("div",at,[e("span",null,_(n.app.author),1)]),e("div",lt,[e("span",null,_(n.numberToSum((g=(f=n.app)==null?void 0:f.expand)==null?void 0:g.downloadCount))+" 次下载",1),t[6]||(t[6]=L("   ",-1)),t[7]||(t[7]=e("span",null,"｜",-1)),t[8]||(t[8]=L("    ",-1)),e("span",null,[L(_(n.numberToSum((A=(k=n.app)==null?void 0:k.expand)==null?void 0:A.starCount))+" 次点赞 ",1),((s=n.app)==null?void 0:s.expand)!=null?(a(),l(F,{key:0},[(E=(p=n.app)==null?void 0:p.expand)!=null&&E.isStar?(a(),l("button",{key:0,class:"star",title:(R=(N=n.app)==null?void 0:N.expand)==null?void 0:R.isStar},[u(C)],8,pt)):(a(),l("button",{key:1,class:"star",onClick:t[1]||(t[1]=i=>n.StarApp())},[u(U)]))],64)):d("",!0)])]),e("div",it,[e("div",rt,[(a(!0),l(F,null,W(n.app.tagsList,i=>(a(),l(F,{key:i},[e("div",_t,[e("span",null,_(i),1)]),t[9]||(t[9]=e("span",{class:"block"},"｜",-1))],64))),128))]),e("div",ct,[n.app.isInstall?(a(),l("div",dt,[e("a",{onClick:t[2]||(t[2]=i=>n.DeleteApp()),title:"卸载"},[u(x)])])):d("",!0),n.app.isUpdate&&n.app.update?(a(),l("button",{key:1,class:"update",title:"升级",onClick:t[3]||(t[3]=i=>n.UpdateApp())},[...t[10]||(t[10]=[e("span",null,"更新",-1)])])):d("",!0),n.app.isInstall?(a(),l("button",{key:2,class:"open",onClick:t[4]||(t[4]=i=>n.OpenApp())},[...t[11]||(t[11]=[e("span",null,"打开",-1)])])):(a(),l("button",{key:3,class:"install",onClick:t[5]||(t[5]=i=>n.InstallApp())},[...t[12]||(t[12]=[e("span",null,"安装",-1)])]))])])]),n.firstOpen?(a(),P(y,{key:0,close:n.closeFirstOpen},null,8,["close"])):d("",!0)])}const mt=D(Y,[["render",ut],["__scopeId","data-v-cd98b8fc"]]);export{mt as A,V as l};
