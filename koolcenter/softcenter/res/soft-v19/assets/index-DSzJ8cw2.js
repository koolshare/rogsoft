import{A as T,_ as D,B as w,C as G,i as U,h as x,u as j,E as q,G as H,r as K,c as p,b as s,d as P,e as c,j as u,f as r,t as _,g as y,F as I,m as W,a as k,l as L,o as a}from"./index-BscvdcJ0.js";const V={start(m){T.commit("loading/start",m)},stop(){T.commit("loading/stop")}},Y={props:{app:Object},components:{FirstOpenComponent:w},setup(m){const t=j(),o=G(m,"app"),n=U.numberToSum;x(()=>t.getters["model/LocalAppCount"]);const F=x(()=>{var i,d;const e=((d=(i=t==null?void 0:t.state)==null?void 0:i.model)==null?void 0:d.localSoftcenter)||{};return(e==null?void 0:e[q])===H}),v=K(!1),A=()=>{v.value=!1},b=()=>{o.value.isInstall&&U.OpenAppWeb(o.value.name,o.value.target)},S=()=>{confirm(`确定要卸载 ${o.value.title} 吗?`)&&k.RemoveApp(o.value).then(e=>{L.start(()=>{location.reload()})})},C=()=>{if(!F.value)return v.value=!0;k.InsertApp(o.value).then(e=>{L.start(()=>{location.reload()})})},O=()=>{k.UpdateApp(o.value.update).then(e=>{L.start(()=>{location.reload()})})},h=()=>{V.start("进行中...");const e=o.value.name;k.postStarApp(e).then(i=>{t.dispatch("model/starApp",e)}).catch(()=>{}).then(()=>{V.stop()})},g=e=>{e&&window.open(e,"_blank")},f=x(()=>{var e;return(e=o==null?void 0:o.value)!=null&&e.isInstall?`/res/icon-${o.value.name}.png`:`${U.HomeUrl()}/softcenter/softcenter/res/icon-${o.value.name}.png`});return{app:o,open,numberToSum:n,OpenApp:b,InstallApp:C,DeleteApp:S,UpdateApp:O,StarApp:h,OpenLink:g,thumbnailURL:f,closeFirstOpen:A,firstOpen:v}}},z={class:"plugin-app theme_apps"},J={class:"plugin-app_f"},M=["title"],Q=["src"],X={class:"plugin-app_hooks"},Z={class:"plugin-app_hooks__item"},$=["href"],tt=["title"],nt={class:"plugin-app_info"},st=["title"],et={class:"plugin-app_info__title___text"},ot={class:"plugin-app_info__title___version"},at={class:"plugin-app_info__date"},pt={class:"plugin-app_info__as"},lt=["title"],it={class:"plugin-app_info__btn"},rt={class:"plugin-app_info__tags"},_t={class:"tag"},dt={class:"btn_box"},ct={key:0,class:"delete",title:"卸载"};function ut(m,t,o,n,F,v){var g,f,e,i,d,B,E,N,R;const A=r("svg-home"),b=r("svg-info"),S=r("svg-nostar"),C=r("svg-star"),O=r("svg-delete"),h=r("FirstOpenComponent");return a(),p("li",z,[s("div",J,[s("div",{class:"plugin-app_thumbnail",title:n.app.title,onClick:t[0]||(t[0]=l=>n.OpenApp())},[s("img",{src:n.thumbnailURL,alt:"图标出走了"},null,8,Q)],8,M),s("div",X,[s("div",Z,[n.app.link?(a(),p("a",{key:0,href:n.app.link,class:"home",target:"_blank",rel:"noopener noreferrer",title:"官网"},[u(A)],8,$)):c("",!0),s("a",{rel:"noopener noreferrer",title:n.app.description},[u(b)],8,tt)])])]),s("div",nt,[s("div",{class:"plugin-app_info__title",title:n.app.title},[s("span",et,_(n.app.title),1),s("span",ot," v"+_(n.app.version),1)],8,st),s("div",at,[s("span",null,_(n.app.author),1)]),s("div",pt,[s("span",null,_(n.numberToSum((f=(g=n.app)==null?void 0:g.expand)==null?void 0:f.downloadCount))+" 次下载",1),t[6]||(t[6]=y("   ",-1)),t[7]||(t[7]=s("span",null,"｜",-1)),t[8]||(t[8]=y("    ",-1)),s("span",null,[y(_(n.numberToSum((i=(e=n.app)==null?void 0:e.expand)==null?void 0:i.starCount))+" 次点赞 ",1),((d=n.app)==null?void 0:d.expand)!=null?(a(),p(I,{key:0},[(E=(B=n.app)==null?void 0:B.expand)!=null&&E.isStar?(a(),p("button",{key:0,class:"star",title:(R=(N=n.app)==null?void 0:N.expand)==null?void 0:R.isStar},[u(S)],8,lt)):(a(),p("button",{key:1,class:"star",onClick:t[1]||(t[1]=l=>n.StarApp())},[u(C)]))],64)):c("",!0)])]),s("div",it,[s("div",rt,[(a(!0),p(I,null,W(n.app.tagsList,l=>(a(),p(I,{key:l},[s("div",_t,[s("span",null,_(l),1)]),t[9]||(t[9]=s("span",{class:"block"},"｜",-1))],64))),128))]),s("div",dt,[n.app.isInstall?(a(),p("div",ct,[s("a",{onClick:t[2]||(t[2]=l=>n.DeleteApp()),title:"卸载"},[u(O)])])):c("",!0),n.app.isUpdate&&n.app.update?(a(),p("button",{key:1,class:"update",title:"升级",onClick:t[3]||(t[3]=l=>n.UpdateApp())},[...t[10]||(t[10]=[s("span",null,"更新",-1)])])):c("",!0),n.app.isInstall?(a(),p("button",{key:2,class:"open",onClick:t[4]||(t[4]=l=>n.OpenApp())},[...t[11]||(t[11]=[s("span",null,"打开",-1)])])):(a(),p("button",{key:3,class:"install",onClick:t[5]||(t[5]=l=>n.InstallApp())},[...t[12]||(t[12]=[s("span",null,"安装",-1)])]))])])]),n.firstOpen?(a(),P(h,{key:0,close:n.closeFirstOpen},null,8,["close"])):c("",!0)])}const vt=D(Y,[["render",ut],["__scopeId","data-v-6ac7c4ee"]]);export{vt as A,V as l};
